<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.example.todolist.server.mapper.TaskMapper">
<!--    动态删除-->
    <delete id="deleteByTasks">
        delete from task where id in
        <foreach collection="ids" item="id" separator="," open="(" close=")">
            #{id}
        </foreach>
    </delete>

<!--    编辑任务-->
    <update id="updateByContent">
        update task
        <set>
            <if test="label != null and label != '' "> label=#{label},</if>
            update_time=#{updateTime},
            <if test="status != null and status != '' "> status=#{status},</if>
            <if test="content != null and content != '' "> content=#{content},</if>
        </set>
        where id=#{id}
    </update>
<!--    动态查询-->
<!--    <select id="selectByStatus" resultType="TaskByStatusPo">-->
<!--        select * from task-->
<!--        <where>-->
<!--            <if test="status!=null">status=#{status}</if></where>-->
<!--    </select>-->

<!--    分页查询-->
    <select id="selectByPage" resultType="com.example.todolist.pojo.dto.TaskDTO">
        select * from task
        <where>
            <if test="label !=null and label !='' ">
                and label like concat ('%',#{label},'%')
            </if>
        </where>
        order by create_time asc
    </select>

<!--    过滤任务-->
    <select id="filterByTask" resultType="com.example.todolist.pojo.po.TaskPO">
        select * from task
        <where>
            <if test="content !=null and content !='' ">
                and content like concat('%',#{content},'%')
            </if>
            <if test="label !=null and label !='' ">
                and label like concat ('%',#{label},'%')
            </if>
            <if test="serialNumber !=null">
                and serial_number=#{serialNumber}
            </if>
            <if test="status !=null">
                and status=#{status}
            </if>
        </where>
    </select>


</mapper>